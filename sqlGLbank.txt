CREATE TABLE Client
(
  fname VARCHAR(30) NOT NULL,
  lname VARCHAR(30) NOT NULL,
  email VARCHAR(30) NOT NULL,
  ID INT AUTO_INCREMENT NOT NULL,
  PRIMARY KEY (ID)
);

CREATE TABLE loginClient
(
  ID INT AUTO_INCREMENT NOT NULL,
  login VARCHAR(30) NOT NULL,
  password VARCHAR(30) NOT NULL,
  IDClient INT NOT NULL,
  PRIMARY KEY (ID),
  FOREIGN KEY (IDClient) REFERENCES Client(ID)
);

CREATE TABLE loginHistory
(
  loginTime TIMESTAMP NOT NULL,
  ID INT AUTO_INCREMENT NOT NULL,
  success BOOLEAN NOT NULL,
  IDLoginClient INT NOT NULL,
  PRIMARY KEY (ID),
  FOREIGN KEY (IDLoginClient) REFERENCES loginClient(ID)
);

CREATE TABLE Account
(
  ID INT AUTO_INCREMENT  NOT NULL,
  AccName INT NOT NULL,
  money INT NOT NULL,
  IDClient INT NOT NULL,
  PRIMARY KEY (ID),
  FOREIGN KEY (IDClient) REFERENCES Client(ID)
);

CREATE TABLE card
(
  ID INT AUTO_INCREMENT   NOT NULL,
  PIN VARCHAR(4) NOT NULL,
  active BOOLEAN NOT NULL,
  expireY INT NOT NULL,
  expireM INT NOT NULL,
  IDAccount INT NOT NULL,
  PRIMARY KEY (ID),
  FOREIGN KEY (IDAccount) REFERENCES Account(ID)
);

CREATE TABLE FailCardLog
(
  ID INT AUTO_INCREMENT NOT NULL,
  FailDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
  IDCard INT NOT NULL,
  PRIMARY KEY (ID),
  FOREIGN KEY (IDCard) REFERENCES card(ID)
);

CREATE TABLE CardTrans
(
  ID INT AUTO_INCREMENT  NOT NULL,
  transDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
  transAmount INT NOT NULL,
  IDCard INT NOT NULL,
  PRIMARY KEY (ID),
  FOREIGN KEY (IDCard) REFERENCES card(ID)
);

CREATE TABLE Positions
(
  ID INT AUTO_INCREMENT NOT NULL,
  name VARCHAR(30) NOT NULL,
  PRIMARY KEY (ID)
);

CREATE TABLE Employee
(
  ID INT AUTO_INCREMENT  NOT NULL,
  lname VARCHAR(30) NOT NULL,
  fname VARCHAR(30) NOT NULL,
  position INT NOT NULL,
  PRIMARY KEY (ID),
  FOREIGN KEY (position) REFERENCES Positions(ID)
);

CREATE TABLE loginEmployee
(
  ID INT AUTO_INCREMENT NOT NULL,
  login VARCHAR(30) NOT NULL,
  password VARCHAR(30) NOT NULL,
  IDEmployee INT NOT NULL,
  PRIMARY KEY (ID),
  FOREIGN KEY (IDEmployee) REFERENCES Employee(ID)
);

CREATE TABLE Transaction
(
  ID INT AUTO_INCREMENT NOT NULL,
  transAmount INT NOT NULL,
  transDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
  RecAccount INT NOT NULL,
  IDAccount INT NOT NULL,
  IDEmployee INT NOT NULL,
  PRIMARY KEY (ID),
  FOREIGN KEY (IDAccount) REFERENCES Account(ID),
  FOREIGN KEY (IDEmployee) REFERENCES Employee(ID)
);